+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
| state\event    | ready | OK             | ERROR          | ERROR and retry == 0 | WIFI GOT IP | WIFI DISCONNECT | 0,CONNECT      | DNS Fail       | ALREADY CONNECT | CLOSED        | IDLE TIMEOUT | TIMEOUT     | TIMEOUT and retry == 0 | rst retry == 0 | reset retry == 0 | SEND       | >       | SEND OK       | SEND FAIL   | +IPD:len,data         | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                | AT    |                |                |                      | AT          |                 |                |                |                 |               |              | AT          |                        | RESET          | DISABLE          |            |         |               |             |                       | POWER OFF |
|                | ----  |                |                |                      | ----        |                 |                |                |                 |               |              | ----        |                        | ----           | ----             |            |         |               |             |                       | ----      |
| INITIAL        | AT    |                |                |                      | AT          |                 |                |                |                 |               |              | AT          |                        | RESETING       | DISABLED         |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       | ATE0           | AT             |                      |             | AT+RST          |                |                |                 |               |              | AT          | RESET                  |                |                  |            |         |               |             |                       | POWER OFF |
|                |       | ----           | ----           |                      |             | ----            |                |                |                 |               |              | ----        | ----                   |                |                  |            |         |               |             |                       | ----      |
| AT             |       | AT OKAY        | AT ERROR       |                      |             | INITIAL         |                |                |                 |               |              | AT          | RESETING               |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       | AT+CIPSTART    | ATE0           |                      | AT+CIPSTART | AT+RST          |                |                |                 |               |              | RESET       |                        |                |                  |            |         |               |             |                       | POWER OFF |
|                |       | ----           | ----           |                      | ----        | ----            |                |                |                 |               |              | ----        |                        |                |                  |            |         |               |             |                       | ----      |
| AT OKAY        |       | ATE OKAY       | ATE ERROR      |                      | ATE OKAY    | INITIAL         |                |                |                 |               |              | RESETING    |                        |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       | AT+CIPSTART    | AT             | RESET                | AT+CIPSTART | AT+RST          |                |                |                 |               |              |             |                        |                |                  |            |         |               |             |                       | POWER OFF |
|                |       | ----           | ----           | ----                 | ----        | ----            |                |                |                 |               |              |             |                        |                |                  |            |         |               |             |                       | ----      |
| AT ERROR       |       | ATE OKAY       | AT ERROR       | RESETING             | ATE OKAY    | INITIAL         |                |                |                 |               |              |             |                        |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                | AT+CIPSTART    |                      | AT+CIPSTART | AT+RST          | ADJUST SYSTICK | AT+CIPCLOSE    |                 |               |              | AT+CIPSTART | AT+RST                 |                |                  |            |         |               |             |                       | POWER OFF |
|                |       |                | ----           |                      | ----        | ----            | ----           | ----           | ----            |               |              | ----        | ----                   |                |                  |            |         |               |             |                       | ----      |
| ATE OKAY       |       |                | CIPSTART ERROR |                      | ATE OKAY    | INITIAL         | CIPSTART OKAY  | CIPCLOSE ERROR | CIPSTART OKAY   |               |              | ATE OKAY    | INITIAL                |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       | AT+CIPSTART    | ATE0           | RESET                |             | AT+RST          |                |                |                 |               |              |             |                        |                |                  |            |         |               |             |                       | POWER OFF |
|                |       | ----           | ----           | ----                 |             | ----            |                |                |                 |               |              |             |                        |                |                  |            |         |               |             |                       | ----      |
| ATE ERROR      |       | ATE OKAY       | ATE ERROR      | RESETING             |             | INITIAL         |                |                |                 |               |              |             |                        |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                |                |                      |             | AT+RST          |                |                |                 |               | AT+RST       |             |                        |                |                  | AT+CIPSEND |         |               |             |                       | POWER OFF |
|                |       |                |                |                      |             | ----            |                |                |                 |               | ----         |             |                        |                |                  | ----       |         |               |             | network read callback | ----      |
| CIPSTART OKAY  |       |                |                |                      |             | INITIAL         |                |                |                 |               | INITIAL      |             |                        |                |                  | WAIT >     |         |               |             | ----                  | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                | AT+CIPSTART    | AT+RST               |             | AT+RST          |                |                |                 |               |              |             | AT+RST                 |                |                  |            |         |               |             |                       | POWER OFF |
|                |       |                | ----           | ----                 |             | ----            | ----           |                |                 |               |              | AT+CIPSTART | ----                   |                |                  |            |         |               |             |                       | ----      |
| CIPSTART ERROR |       |                | CIPSTART ERROR | INITIAL              |             | INITIAL         | CIPSTART OKAY  |                |                 |               |              | ----        | INITIAL                |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       | AT+CIPCLOSE    | AT+CIPCLOSE    |                      |             | AT+RST          |                |                | AT+CIPCLOSE     | AT+CIPSTART   |              |             | AT+RST                 |                |                  |            |         |               |             |                       | POWER OFF |
|                |       | ----           | ----           |                      |             | ----            |                |                | ----            | ----          |              | AT+CIPCLOSE | ----                   |                |                  |            |         |               |             |                       | ----      |
| CIPCLOSE       |       | CIPCLOSE ERROR | CIPCLOSE ERROR |                      |             | INITIAL         |                |                | CIPCLOSE ERROR  | CIPCLOSE OKAY |              | ----        | INITIAL                |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                | AT+CIPSTART    |                      |             | AT+RST          |                |                |                 |               |              |             | AT+RST                 |                |                  |            |         |               |             |                       | POWER OFF |
|                |       |                | ----           |                      |             | ----            | ----           |                | ----            |               |              | AT+CIPSTART | ----                   |                |                  |            |         |               |             |                       | ----      |
| CIPCLOSE OKAY  |       |                | CIPSTART ERROR |                      |             | INITIAL         | CIPSTART OKAY  |                | CIPSTART OKAY   |               |              | ----        | INITIAL                |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       | AT+CIPSTART    | AT+CIPCLOSE    | AT+RST               |             | AT+RST          |                |                |                 |               |              |             | AT+RST                 |                |                  |            |         |               |             |                       | POWER OFF |
|                |       | ----           | ----           | ----                 |             | ----            | ----           |                |                 |               |              |             | ----                   |                |                  |            |         |               |             |                       | ----      |
| CIPCLOSE ERROR |       | CIPCLOSE OKAY  | CIPCLOSE ERROR | INITIAL              |             | INITIAL         | CIPSTART OKAY  |                |                 |               |              |             | INITIAL                |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                |                |                      |             |                 |                |                |                 |               |              | ENABLE      |                        |                |                  |            |         |               |             |                       | POWER OFF |
|                |       |                |                |                      |             |                 |                |                |                 |               |              | ----        |                        |                |                  |            |         |               |             |                       | ----      |
| DISABLED       |       |                |                |                      |             |                 |                |                |                 |               |              | ENABLED     |                        |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                |                |                      |             |                 |                |                |                 |               |              | RESET       |                        |                |                  |            |         |               |             |                       | POWER OFF |
|                |       |                |                |                      |             |                 |                |                |                 |               |              | ----        |                        |                |                  |            |         |               |             |                       | ----      |
| ENABLED        |       |                |                |                      |             |                 |                |                |                 |               |              | RESETING    |                        |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                |                |                      |             | AT+RST          |                |                |                 |               | AT+RST       | STOP RESET  |                        |                | DISABLE          |            |         |               |             |                       | POWER OFF |
|                |       |                |                |                      |             | ----            |                |                |                 |               | ----         | ----        |                        |                | ----             |            |         |               |             |                       | ----      |
| RESETING       |       |                |                |                      |             | INITIAL         |                |                |                 |               | INITIAL      | INITIAL     |                        |                | DISABLED         |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                |                |                      |             | AT+RST          |                |                |                 |               | AT+RST       |             | AT+CIPCLOSE            |                |                  |            | WRITE   |               |             |                       | POWER OFF |
|                |       |                |                |                      |             | ----            |                |                |                 |               | ----         |             | ----                   |                |                  |            | ----    |               |             |                       | ----      |
| WAIT >         |       |                |                |                      |             | INITIAL         |                |                |                 |               | INITIAL      |             | CIPCLOSE               |                |                  |            | SENDING |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                |                |                      |             | AT+RST          |                |                |                 |               |              | AT+RST      |                        |                |                  |            |         |               | AT+CIPCLOSE |                       | POWER OFF |
|                |       |                |                |                      |             | ----            |                |                |                 |               |              | ----        |                        |                |                  |            |         | ----          | ----        |                       | ----      |
| SENDING        |       |                |                |                      |             | INITIAL         |                |                |                 |               |              | INITIAL     |                        |                |                  |            |         | CIPSTART OKAY | CIPCLOSE    |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
|                |       |                |                |                      |             |                 |                |                |                 |               |              | POWER ON    |                        |                |                  |            |         |               |             |                       | POWER OFF |
|                |       |                |                |                      |             |                 |                |                |                 |               |              | ----        |                        |                |                  |            |         |               |             |                       | ----      |
| POWER OFF      |       |                |                |                      |             |                 |                |                |                 |               |              | INITIAL     |                        |                |                  |            |         |               |             |                       | POWER OFF |
+----------------+-------+----------------+----------------+----------------------+-------------+-----------------+----------------+----------------+-----------------+---------------+--------------+-------------+------------------------+----------------+------------------+------------+---------+---------------+-------------+-----------------------+-----------+
