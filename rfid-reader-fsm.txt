+-------------------------+------------------------------------------+-------------------------+----------------------------+------------------------------------------+------------------------------------+------------------------------------+-----------------------------+---------------------+----------------+------------------------------------+---------------------------------------+------------------------+-------------------------+
| state\event             | inventory                                | inventory ack with data | inventory ack without data | difference                               | difference ack with increment data | difference ack with decrement data | difference ack without data | data ack, continued | data ack, done | data ack, done with decrement data | data ack, done without decrement data | cmd timeout, retry > 0 | cmd timeout, retry == 0 |
+-------------------------+------------------------------------------+-------------------------+----------------------------+------------------------------------------+------------------------------------+------------------------------------+-----------------------------+---------------------+----------------+------------------------------------+---------------------------------------+------------------------+-------------------------+
|                         | set retry = duration div interval plus 1 |                         |                            | set retry = duration div interval plus 1 |                                    |                                    |                             |                     |                |                                    |                                       |                        |                         |
|                         | set cmd timer                            |                         |                            | set cmd timer                            |                                    |                                    |                             |                     |                |                                    |                                       |                        |                         |
|                         | set activated                            |                         |                            | set activated                            |                                    |                                    |                             |                     |                |                                    |                                       |                        |                         |
|                         | inventory                                |                         |                            | difference                               |                                    |                                    |                             |                     |                |                                    |                                       |                        |                         |
|                         | ack                                      |                         |                            | ack                                      |                                    |                                    |                             |                     |                |                                    |                                       |                        |                         |
|                         | ----                                     |                         |                            | ----                                     |                                    |                                    |                             |                     |                |                                    |                                       |                        |                         |
| READY                   | INVENTORYING                             |                         |                            | DIFFERENCING                             |                                    |                                    |                             |                     |                |                                    |                                       |                        |                         |
+-------------------------+------------------------------------------+-------------------------+----------------------------+------------------------------------------+------------------------------------+------------------------------------+-----------------------------+---------------------+----------------+------------------------------------+---------------------------------------+------------------------+-------------------------+
|                         |                                          | set data parameter      |                            |                                          |                                    |                                    |                             |                     |                |                                    |                                       |                        |                         |
|                         |                                          | set retry = 6           |                            |                                          |                                    |                                    |                             |                     |                |                                    |                                       |                        |                         |
|                         |                                          | set cmd timer           |                            |                                          |                                    |                                    |                             |                     |                |                                    |                                       | retry - 1              |                         |
|                         |                                          | fetch data              | ack data                   |                                          |                                    |                                    |                             |                     |                |                                    |                                       | set cmd timer          | set unactivated         |
|                         |                                          | ----                    | ----                       |                                          |                                    |                                    |                             |                     |                |                                    |                                       | inventory              | ----                    |
| INVENTORYING            |                                          | FETCHING INVENTORY DATA | READY                      |                                          |                                    |                                    |                             |                     |                |                                    |                                       | ----                   | READY                   |
+-------------------------+------------------------------------------+-------------------------+----------------------------+------------------------------------------+------------------------------------+------------------------------------+-----------------------------+---------------------+----------------+------------------------------------+---------------------------------------+------------------------+-------------------------+
|                         |                                          |                         |                            |                                          | set data parameter                 | set data parameter                 |                             |                     |                |                                    |                                       |                        |                         |
|                         |                                          |                         |                            |                                          | set retry = 6                      | set retry = 6                      |                             |                     |                |                                    |                                       |                        |                         |
|                         |                                          |                         |                            |                                          | set cmd timer                      | set cmd timer                      |                             |                     |                |                                    |                                       | retry - 1              |                         |
|                         |                                          |                         |                            |                                          | fetch data                         | fetch data                         | ack data                    |                     |                |                                    |                                       | set cmd timer          | set unactivated         |
|                         |                                          |                         |                            |                                          | ----                               | ----                               | ----                        |                     |                |                                    |                                       | difference             | ----                    |
| DIFFERENCING            |                                          |                         |                            |                                          | FETCHING INCREMENT DATA            | FETCHING DECREMENT DATA            | READY                       |                     |                |                                    |                                       | ----                   | READY                   |
+-------------------------+------------------------------------------+-------------------------+----------------------------+------------------------------------------+------------------------------------+------------------------------------+-----------------------------+---------------------+----------------+------------------------------------+---------------------------------------+------------------------+-------------------------+
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | ack data            |                |                                    |                                       |                        |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | set next parameter  |                |                                    |                                       |                        |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | set retry = 6       |                |                                    |                                       | retry - 1              |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | set cmd timer       | ack data       |                                    |                                       | set cmd timer          | set unactivated         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | fetch data          | ----           |                                    |                                       | fetch data             | ----                    |
| FETCHING INVENTORY DATA |                                          |                         |                            |                                          |                                    |                                    |                             | ----                | READY          |                                    |                                       | ----                   | READY                   |
+-------------------------+------------------------------------------+-------------------------+----------------------------+------------------------------------------+------------------------------------+------------------------------------+-----------------------------+---------------------+----------------+------------------------------------+---------------------------------------+------------------------+-------------------------+
|                         |                                          |                         |                            |                                          |                                    |                                    |                             |                     |                | ack data                           |                                       |                        |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | ack data            |                | set decrement parameter            |                                       |                        |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | set next parameter  |                | set retry = 6                      |                                       |                        |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | set retry = 6       |                | set cmd timer                      |                                       | retry - 1              |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | set cmd timer       |                | fetch data                         | ack data                              | set cmd timer          | set unactivated         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | fetch data          |                | ----                               | ----                                  | fetch data             | ----                    |
| FETCHING INCREMENT DATA |                                          |                         |                            |                                          |                                    |                                    |                             | ----                |                | FETCHING DECREMENT DATA            | READY                                 | ----                   | READY                   |
+-------------------------+------------------------------------------+-------------------------+----------------------------+------------------------------------------+------------------------------------+------------------------------------+-----------------------------+---------------------+----------------+------------------------------------+---------------------------------------+------------------------+-------------------------+
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | ack data            |                |                                    |                                       |                        |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | set next parameter  |                |                                    |                                       |                        |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | set retry = 6       |                |                                    |                                       | retry - 1              |                         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | set cmd timer       | ack data       |                                    |                                       | set cmd timer          | set unactivated         |
|                         |                                          |                         |                            |                                          |                                    |                                    |                             | fetch data          | ----           |                                    |                                       | fetch data             | ----                    |
| FETCHING DECREMENT DATA |                                          |                         |                            |                                          |                                    |                                    |                             | ----                | READY          |                                    |                                       | ----                   | READY                   |
+-------------------------+------------------------------------------+-------------------------+----------------------------+------------------------------------------+------------------------------------+------------------------------------+-----------------------------+---------------------+----------------+------------------------------------+---------------------------------------+------------------------+-------------------------+
